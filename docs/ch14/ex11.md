# 习题14.11

&emsp;&emsp;编写一个名为`transform()`函数，接受4个参数：内含`double`类型数据的源数组名、内含`double`类型数据的目标数组名、一个表示数组元素个数的`int`类型参数、函数名（或等价的函数指针）。`transform()`函数应把指定函数应用于源数组中的每个元素，并把返回值存储在目标数组中。例如：  
`transform(source, target, 100, sin);`  
&emsp;&emsp;该声明会把`target[0]`设置为`sin(source[0])`，等等，共有100个元素。在一个程序中调用`transform()`4次，以测试该函数。分别使用`math.h`函数库中的两个函数以及自定义的两个函数作为参数。

**解答：**  
代码位置：`exercises/ch14/ex11.c`
```c
#include <stdio.h>
#include <math.h>

#define LEN 100

void transform(double source[], double target[], int n, double (*func)(double));

double twice(double x);

double half(double x);

void show_data(double arr[], int n, int span);

int main(void) {
    double source[LEN], target[LEN];

    // 初始化源数组
    for (int i = 0; i < LEN; i++) {
        source[i] = i;
    }
    printf("The source data is:\n");
    // 显示源数组元素
    show_data(source, LEN, 3);
    printf("\n");

    // 调用sin函数
    transform(source, target, LEN, sin);
    printf("The target sin data is:\n");
    show_data(target, LEN, 10);
    printf("\n");

    // 调用cos函数
    transform(source, target, LEN, cos);
    printf("The target cos data is:\n");
    show_data(target, LEN, 10);
    printf("\n");

    // 调用自定义twice函数
    transform(source, target, LEN, twice);
    printf("The target twice data is:\n");
    show_data(target, LEN, 3);
    printf("\n");

    // 调用自定义half函数
    transform(source, target, LEN, half);
    printf("The target half data is:\n");
    show_data(target, LEN, 4);
    printf("\n");
    return 0;
}

void show_data(double arr[], int n, int span) {
    for (int i = 0; i < n; i++) {
        if (i % 10 != 9) {
            printf("%*g ", span, arr[i]);
        } else {
            printf("%*g ", span, arr[i]);
            printf("\n");
        }
    }
}

void transform(double source[], double target[], int n, double (*func)(double)) {
    // 循环调用func函数
    for (int i = 0; i < n; ++i) {
        target[i] = func(source[i]);
    }
}

double twice(double x) {
    return 2.0 * x;
}

double half(double x) {
    return x / 2.0;
}
```

**执行结果：**
```
CPrimerPlus\cmake-build-debug-mingw\ex14-11.exe
The source data is:
  0   1   2   3   4   5   6   7   8   9
 10  11  12  13  14  15  16  17  18  19
 20  21  22  23  24  25  26  27  28  29
 30  31  32  33  34  35  36  37  38  39
 40  41  42  43  44  45  46  47  48  49
 50  51  52  53  54  55  56  57  58  59
 60  61  62  63  64  65  66  67  68  69
 70  71  72  73  74  75  76  77  78  79
 80  81  82  83  84  85  86  87  88  89
 90  91  92  93  94  95  96  97  98  99

The target sin data is:
         0   0.841471   0.909297    0.14112  -0.756802  -0.958924  -0.279415   0.656987   0.989358   0.412118
 -0.544021   -0.99999  -0.536573   0.420167   0.990607   0.650288  -0.287903  -0.961397  -0.750987   0.149877
  0.912945   0.836656 -0.00885131   -0.84622  -0.905578  -0.132352   0.762558   0.956376   0.270906  -0.663634
 -0.988032  -0.404038   0.551427   0.999912   0.529083  -0.428183  -0.991779  -0.643538   0.296369   0.963795
  0.745113  -0.158623  -0.916522  -0.831775  0.0177019   0.850904   0.901788   0.123573  -0.768255  -0.953753
 -0.262375   0.670229   0.986628   0.395925  -0.558789  -0.999755  -0.521551   0.436165   0.992873   0.636738
 -0.304811  -0.966118  -0.739181   0.167356   0.920026   0.826829 -0.0265512   -0.85552  -0.897928  -0.114785
  0.773891   0.951055   0.253823  -0.676772  -0.985146  -0.387782   0.566108    0.99952   0.513978  -0.444113
 -0.993889  -0.629888   0.313229   0.968364    0.73319  -0.176076  -0.923458  -0.821818  0.0353983   0.860069
  0.893997   0.105988  -0.779466  -0.948282  -0.245252   0.683262   0.983588   0.379608  -0.573382  -0.999207

The target cos data is:
         1   0.540302  -0.416147  -0.989992  -0.653644   0.283662    0.96017   0.753902    -0.1455   -0.91113
 -0.839072  0.0044257   0.843854   0.907447   0.136737  -0.759688  -0.957659  -0.275163   0.660317   0.988705
  0.408082  -0.547729  -0.999961  -0.532833   0.424179   0.991203   0.646919  -0.292139  -0.962606  -0.748058
  0.154251   0.914742   0.834223 -0.0132767   -0.84857  -0.903692  -0.127964   0.765414   0.955074   0.266643
 -0.666938  -0.987339  -0.399985   0.555113   0.999843   0.525322  -0.432178  -0.992335  -0.640144   0.300593
  0.964966   0.742154  -0.162991  -0.918283   -0.82931  0.0221268    0.85322   0.899867    0.11918   -0.77108
 -0.952413  -0.258102   0.673507   0.985897   0.391857  -0.562454  -0.999647   -0.51777   0.440143    0.99339
  0.633319  -0.309023  -0.967251  -0.736193   0.171717   0.921751   0.824331  -0.030975  -0.857803  -0.895971
 -0.110387   0.776686   0.949678    0.24954  -0.680023  -0.984377  -0.383698    0.56975   0.999373   0.510177
 -0.448074  -0.994367  -0.626444   0.317429   0.969459   0.730174   -0.18043  -0.925148  -0.819288  0.0398209

The target twice data is:
  0   2   4   6   8  10  12  14  16  18
 20  22  24  26  28  30  32  34  36  38
 40  42  44  46  48  50  52  54  56  58
 60  62  64  66  68  70  72  74  76  78
 80  82  84  86  88  90  92  94  96  98
100 102 104 106 108 110 112 114 116 118
120 122 124 126 128 130 132 134 136 138
140 142 144 146 148 150 152 154 156 158
160 162 164 166 168 170 172 174 176 178
180 182 184 186 188 190 192 194 196 198

The target half data is:
   0  0.5    1  1.5    2  2.5    3  3.5    4  4.5
   5  5.5    6  6.5    7  7.5    8  8.5    9  9.5
  10 10.5   11 11.5   12 12.5   13 13.5   14 14.5
  15 15.5   16 16.5   17 17.5   18 18.5   19 19.5
  20 20.5   21 21.5   22 22.5   23 23.5   24 24.5
  25 25.5   26 26.5   27 27.5   28 28.5   29 29.5
  30 30.5   31 31.5   32 32.5   33 33.5   34 34.5
  35 35.5   36 36.5   37 37.5   38 38.5   39 39.5
  40 40.5   41 41.5   42 42.5   43 43.5   44 44.5
  45 45.5   46 46.5   47 47.5   48 48.5   49 49.5

Process finished with exit code 0
```